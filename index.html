<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حاسبة القروض الذكية</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* نفس الأنماط السابقة */
    </style>
</head>
<body>
    <div class="calculator">
        <h2>حاسبة القروض الذكية</h2>
        <div class="input-group">
            <label for="type">اختر النوع:</label>
            <select id="type">
                <option value="product">سلعة</option>
                <option value="umrah">عمرة</option>
            </select>
        </div>
        <div class="input-group">
            <label for="months">عدد الأشهر:</label>
            <input type="number" id="months" placeholder="أدخل عدد الأشهر" min="1" max="18">
        </div>
        <div class="input-group">
            <label for="amount">المبلغ :</label>
            <input type="number" id="amount" placeholder="أدخل المبلغ" min="0">
        </div>
        <button onclick="calculate()">احسب القسط</button>
        <div class="result-box">
            <p id="result">النتيجة ستظهر هنا</p>
        </div>
    </div>

    <script>
        function calculate() {
            const type = document.getElementById('type').value;
            const months = parseInt(document.getElementById('months').value);
            const amount = parseFloat(document.getElementById('amount').value);
            let monthlyRate = 0;
            let additionalFee = 0;
            let totalSum = 0;

            // تحديد النسبة الشهرية
            switch(months) {
                case 1: case 2: monthlyRate = 0.17; break;
                case 3: monthlyRate = 0.2; break;
                case 4: monthlyRate = 0.22; break;
                case 5: monthlyRate = 0.24; break;
                case 6: monthlyRate = 0.27; break;
                case 7: monthlyRate = 0.3; break;
                case 8: monthlyRate = 0.34; break;
                case 9: monthlyRate = 0.38; break;
                case 10: monthlyRate = 0.42; break;
                case 11: monthlyRate = 0.46; break;
                case 12: monthlyRate = 0.5; break;
                case 13: monthlyRate = 0.52; break;
                case 14: monthlyRate = 0.57; break;
                case 15: monthlyRate = 0.62; break;
                case 16: monthlyRate = 0.67; break;
                case 17: monthlyRate = 0.72; break;
                case 18: monthlyRate = 0.77; break;
                default: monthlyRate = 0;
            }

            if (type === 'product') {
                // تحديد الرسوم الإضافية للسلع
                if (amount <= 999) additionalFee = 20;
                else if (amount <= 1999) additionalFee = 30;
                else if (amount <= 2999) additionalFee = 50;
                else if (amount <= 3999) additionalFee = 70;
                else if (amount <= 4999) additionalFee = 90;
                else if (amount <= 5999) additionalFee = 110;
                else if (amount <= 6999) additionalFee = 140;
                else if (amount <= 7999) additionalFee = 170;
                else if (amount <= 8999) additionalFee = 210;
                else if (amount <= 9999) additionalFee = 250;
                else additionalFee = 300;

                totalSum = (amount + additionalFee) * (1 + monthlyRate);
            } else { // عمرة
                if (amount >= 10000 && amount < 20000) {
                    monthlyRate *= 0.9;
                } else if (amount >= 20000) {
                    monthlyRate *= 0.8;
                }
                totalSum = amount * (1 + monthlyRate);
            }

            const monthlyPayment = Math.ceil(totalSum / months / 10) * 10;

            document.getElementById('result').innerHTML = `
                <strong>القسط الشهري:</strong> ${monthlyPayment.toFixed(2)}<br>
                <strong>إجمالي المبلغ:</strong> ${totalSum.toFixed(2)}
            `;
        }
    </script>
</body>
</html>
